/*!
 * World JS: Evolution Simulator
 * https://github.com/anvoz/world-js
 *
 * Version 1.2
 *
 * Copyright (c) 2013 An Vo - anvo4888@gmail.com
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 */

!function(a){"use strict";var c=a.document,d=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(function(){b(+new Date)},1e3/60)}}(),e=a.WorldJS=function(){var a=this;a.running=!1,a.stopCallback=function(){},a.width=640,a.height=360,a.padding=10,a.canvas={wrapper:!1,context:!1},a.sprite={src:"images/seeds.png",image:!1},a.nextSeedId=1,a.maxSafeSeedsForDisplay=3e4,a.tickPerYear=60,a.tickMod=0,a.distributedTicks=[];for(var b=0;b<a.tickPerYear-1;b++)a.distributedTicks.push(0);a.lastTickTime=0,a.fps=0,a.Tile=new e.Tile,a.Knowledge=new e.Knowledge,a.Statistic=new e.Statistic,a.Rules=new e.Rules,a.yearPassedCallback=function(){}};e.prototype.init=function(a){var b=this,d=c.createElement("canvas"),e=b.canvas.wrapper=c.getElementById(a),f=b.width=d.width=e.clientWidth||b.width,g=b.height=d.height=e.clientHeight||b.height;e.appendChild(d),b.canvas.context=d.getContext("2d");var h=new Image;return h.src=b.sprite.src,b.sprite.image=h,b.Tile.init(b,f,g),b},e.prototype.add=function(a,b){var c=this,d=new a(b);d.world=c,d.id=c.nextSeedId++,d.age=b.age||0,d.age>0&&(d.tickCount=d.age*c.tickPerYear),d.tickMod=c.tickMod,d.IQ+=c.Rules.baseIQ,d.x===!1&&(d.x=e.Helper.random(0,c.width-1-Math.max(d.appearance.width,c.padding))),d.y===!1&&(d.y=e.Helper.random(0,c.height-1-d.appearance.height-c.padding)),d.tileIndex=c.Tile.getIndex(d),c.Tile.set(d);for(var f=c.distributedTicks,g=0,h=f[g],i=0,j=f.length;j>i;i++)f[i]<h&&(g=i,h=f[i]);return f[g]++,d.tickIndex=g,d.tickCount+=(c.tickMod+d.tickCount+g)%d.actionInterval,c.Statistic.seedAdded(d),c},e.prototype.remove=function(a){var b=this;return b.Statistic.seedRemoved(a),a.married&&(a.married=!1,a.relationSeed.married=!1,a.relationSeed.relationSeed=!1,a.relationSeed=!1),b.Tile.rem(a),b.distributedTicks[a.tickIndex]--,b},e.prototype.addRandomPeople=function(a,b,c,d){var f=this,g=e.Helper.is,h=e.Helper.random,i=f.tickPerYear;b=g(b,"undefined")?15:b,c=g(c,"undefined")?20:c,d=g(d,"undefined")?0:d;for(var j=0;a>j;j++){var k=h(b,c),l={age:k,tickCount:k*i};if(d>0){var m=5==d?h(1,4):d;switch(m){case 1:l.y=0;break;case 2:l.y=f.height-1;break;case 3:l.x=0;break;case 4:l.x=f.width-1}}a/2>j?f.add(f.Male,l):f.add(f.Female,l)}return f},e.prototype.run=function(a){var b=this,c=b.Statistic,f=b.canvas.context,g=b.sprite.image;b.tickMod=++b.tickMod%b.tickPerYear;var h=0===b.tickMod,i=c.population<=b.maxSafeSeedsForDisplay||h;i&&f.clearRect(0,0,b.width,b.height);var j=b.Tile.list,k=b.Tile.maxDisplayedSeeds,l=0,m=0,n=0,o=0,p=0,q=0,r=0;e.Helper.is;for(var t=0,u=j.length;u>t;t++)for(var v=j[t],w=0,x=0,y=v.length;y>x;x++)if(v[x]){var z=v[x],A=z.tileIndex;if(z.tickMod==b.tickMod)continue;z.tickMod=b.tickMod,h&&(z.age++,l++,m+=z.IQ,z instanceof b.Male?z.age<=z.maxChildAge?p++:(n++,z.married&&r++):z.age<=z.maxChildAge?q++:o++),i&&k>w&&(z.draw(f,g),w++),z.tick();var B=b.Tile.getIndex(z);B!==A&&(b.Tile.rem(z),z.tileIndex=B,b.Tile.set(z))}return h&&(c.yearPassed({population:l,IQ:m,men:n,women:o,boys:p,girls:q,families:r}),b.Rules.change(b),b.Knowledge.gain(b),setTimeout(function(){b.yearPassedCallback.call(b)},1),0===l)?(b.running=!1,void 0):(b.running?(b.fps=1e3/(a-b.lastTickTime),b.lastTickTime=a,d(b.run.bind(b))):(b.stopCallback.call(b),b.stopCallback=function(){}),b)},e.prototype.start=function(){this.running=!0,this.run()},e.prototype.stop=function(a){this.running=!1,e.Helper.is(a,"undefined")||(this.stopCallback=a)}}(window),function(a){"use strict";var c=a.WorldJS;c.Helper={is:function(a,b){return typeof a===b},has:function(a,b){return a.hasOwnProperty(b)},random:function(a,b){return Math.floor(Math.random()*(b-a+1)+a)}}}(window),function(a){"use strict";var d,c=a.WorldJS;d=c.Tile=function(){var a=this;a.list=[],a.availableArrayIndexes=[],a.size=20,a.maxDisplayedSeeds=7,a.totalTiles=!1,a.tilesPerRow=!1,a.tilesPerCol=!1},d.prototype.init=function(a,b,c){var d=a.Tile,e=d.size,f=Math.ceil(b/e)*Math.ceil(c/e);d.totalTiles=f,d.tilesPerRow=Math.ceil(b/e),d.tilesPerCol=Math.ceil(c/e);for(var g=d.list,h=d.availableArrayIndexes,i=0;f>i;i++)g.push([]),h.push([])},d.prototype.getIndex=function(a){return Math.floor(a.x/this.size)+Math.floor(a.y/this.size)*this.tilesPerRow},d.prototype.set=function(a){var b=this,c=b.list[a.tileIndex],d=b.availableArrayIndexes[a.tileIndex];d.length>0?(a.tileArrayIndex=d.pop(),c[a.tileArrayIndex]=a):(a.tileArrayIndex=c.length,c.push(a))},d.prototype.rem=function(a){var b=this;b.list[a.tileIndex][a.tileArrayIndex]=!1,b.availableArrayIndexes[a.tileIndex].push(a.tileArrayIndex)}}(window),function(a){"use strict";var d,c=a.WorldJS;d=c.Knowledge=function(){var a=this;a.list={},a.trending=[],a.trendingAdded=function(){},a.trendingRemoved=function(){},a.completed=[]},d.prototype.gain=function(a){for(var b=this,d=a.Statistic.year,e=a.Statistic.IQ,f=[],g=0,h=0,i=b.trending.length;i>=h;h++){if(f[h]=c.Helper.random(0,100),i>h){var j=b.list[b.trending[h]];1!=j.IQ.priority&&(f[h]*=j.IQ.priority)}g+=f[h]}for(var k=[],l=[],m=[],h=0,i=b.trending.length;i>h;h++){var j=b.list[b.trending[h]],n=e*f[h]/g,o=Math.floor(j.IQ.gained+n);o>=j.IQ.required?(j.IQ.gained=j.IQ.required,l.push.apply(l,j.following),j.affectedYear=d,j.onAffected(a),m.push(j)):(j.IQ.gained=o,k.push(j.id))}if(m.length>0){for(var h=0;h<m.length;h++)b.trendingRemoved(m[h]),b.completed.push(m[h]);for(var h=0;h<l.length;h++)b.trendingAdded(b.list[l[h]]),k.push(l[h]);b.trending=k}}}(window),function(a){"use strict";var d,c=a.WorldJS;d=c.Statistic=function(){var a=this;a.year=0,a.food=1e4,a.population=0,a.IQ=0,a.men=0,a.women=0,a.boys=0,a.girls=0,a.families=0,a.maxIQ=0,a.yearMaxIQ=0,a.maxAge=0,a.yearMaxAge=0,a.die=0,a.sumAge=0,a.dieMarriedFemale=0,a.sumChildren=0},d.prototype.seedAdded=function(a){var b=this;a.IQ>b.maxIQ&&(b.maxIQ=a.IQ,b.yearMaxIQ=b.year)},d.prototype.seedRemoved=function(a){var b=this;b.die++;var d=a.age;d>b.maxAge&&(b.maxAge=d,b.yearMaxAge=b.year),b.sumAge+=d,c.Helper.is(a.totalChildren,"undefined")||(b.dieMarriedFemale++,b.sumChildren+=a.totalChildren)},d.prototype.yearPassed=function(a){var b=this;b.year++,b.population=a.population,b.IQ=a.IQ,b.men=a.men,b.women=a.women,b.boys=a.boys,b.girls=a.girls,b.families=a.families}}(window),function(a){"use strict";var d,c=a.WorldJS;d=c.Rules=function(){var a=this;a.baseIQ=0,a.Chance={death:0,marriage:0,childbirth:0},a.ChanceIncr={death:0,marriage:0,childbirth:0},a.Food={adult:-2,child:-1,min:-1e4},a.Famine={deathChanceIncr:.5,unit:-1e3},a.FoodSpoilage={foodDecr:.9,interval:100}},d.prototype.change=function(a){var b=a.Rules,c=a.Statistic,d=c.food,e=c.men+c.women,f=c.boys+c.girls;d+=e*b.Food.adult+f*b.Food.child,d<b.Food.min&&(d=b.Food.min);var g=0;if(d<=b.Famine.unit){var h=Math.floor(d/b.Famine.unit);g+=h*b.Famine.deathChanceIncr}0===c.year%b.FoodSpoilage.interval&&d>0&&(d-=Math.round(d*b.FoodSpoilage.foodDecr)),c.food=d,b.Chance.death=g+b.ChanceIncr.death}}(window),function(a){"use strict";var d,c=a.WorldJS;d=c.prototype.Seed=function(a){var b=this;b.world=!1,b.id=!1,b.tileIndex=!1,b.tickIndex=!1,b.tickMod=!1,b.x=c.Helper.is(a.x,"undefined")?!1:a.x,b.y=c.Helper.is(a.y,"undefined")?!1:a.y,b.appearance=a.appearance||!1,b.relationSeed=a.relationSeed||!1,b.tickCount=a.tickCount||0,b.actionInterval=a.actionInterval||30,b.moveTo=a.moveTo||!1},d.prototype.draw=function(a,b){var c=this;if(c.appearance===!1)a.fillRect(c.x,c.y,10,10);else{var d=c.age<=c.maxChildAge?c.appearance.child:c.appearance,e=20,f=10,g=c.tickCount%e,h=f>g?g+1:f-g%f-1;a.drawImage(b,d.x,d.y,d.width,d.height,c.x,c.y-h,d.width,d.height)}},d.prototype.move=function(a){var b=this;if(a)a.call(b);else if(b.moveTo===!1||b.moveTo.x===b.x&&b.moveTo.y===b.y){var d=b.world;b.moveTo={x:c.Helper.random(0,d.width-1-Math.max(b.appearance.width,d.padding)),y:c.Helper.random(d.padding,d.height-1-b.appearance.height-d.padding)}}b.x<b.moveTo.x?b.x++:b.x>b.moveTo.x&&b.x--,b.y<b.moveTo.y?b.y++:b.y>b.moveTo.y&&b.y--},d.prototype.seek=function(a){var b=this,d=b.world.Tile,e=[[0,0],[-1,0],[1,0],[0,-1],[0,1],[-1,-1],[-1,1],[1,-1],[1,1]];a||(a=function(a){return a.id!=b.id});var f=d.tilesPerRow,g=d.tilesPerCol;c.Helper.is;for(var i=0,j=e.length;j>i;i++){var k;if(0===i)k=b.tileIndex;else{var l=b.tileIndex%f+e[i][0],m=Math.floor(b.tileIndex/f)+e[i][1];if(!(l>=0&&f>l&&m>=0&&g>m))continue;k=l+m*f}for(var n=d.list[k],o=0,p=n.length;p>o;o++)if(n[o]&&b.id!=n[o].id){var q=n[o];if(a.call(b,q))return q}}return!1},d.prototype.tick=function(){var a=this;a.tickCount++,a.move()},d.prototype.getChance=function(a,b){for(var c=a.world,d=a.chances[b],e=a.age,f=0,g=0,h=0,i=0;d[f]&&e>d[f].range[0];){var j=d[f];g=j.range[0],h=j.from,i=(j.to-j.from)/(j.range[1]-j.range[0]),f++}var k=h+(e-g)*i;return 0!=c.Rules.Chance[b]&&(k+=k*c.Rules.Chance[b]),k}}(window),function(a){"use strict";var e,c=a.WorldJS,d=c.prototype.Seed;e=c.prototype.Male=function(a){var b=this;a.appearance={x:0,y:0,width:13,height:20,child:{x:26,y:0,width:11,height:10}},d.call(b,a),b.IQ=(a.IQ||0)+c.Helper.random(0,3),b.age=a.age||0,b.maxChildAge=15,b.married=!1,b.chances=a.chances||{death:[{range:[1,5],from:.001,to:.005},{range:[5,15],from:.005,to:.01},{range:[15,25],from:.01,to:.025}],marriage:[{range:[15,30],from:.1,to:.5},{range:[30,50],from:.5,to:.1},{range:[50,80],from:.1,to:.01}]}},e.prototype=Object.create(d.prototype),e.prototype.contructor=e,e.prototype.tick=function(){var a=this;a.tickCount++;var b=a.actionInterval;if(a.tickCount%b===b-1){var d=a.world,e=a.getChance(a,"death");if(e>0&&Math.random()<e&&d.remove(a),!a.married&&a.age>=a.chances.marriage[0].range[0]){var f=a.getChance(a,"marriage");if(f>0){var g=Math.random();if(f>g){var h=a.seek(function(b){return b instanceof d.Female&&!b.married&&b.age>=b.chances.childbirth[0].range[0]&&(b.age<=a.age||g*Math.ceil((b.age-a.age)/10)<f)});h!==!1&&(a.married=!0,h.married=!0,a.relationSeed=h,h.relationSeed=a,c.Helper.is(h.totalChildren,"undefined")&&(h.totalChildren=0),h.ageLastBear=h.age+1)}}}}var i=a.married?function(){var a=this,b=a.relationSeed;a.moveTo.x=Math.max(0,b.x-10),a.moveTo.y=b.y}:!1;a.move(i)}}(window),function(a,b){"use strict";var e,c=a.WorldJS,d=c.prototype.Seed;e=c.prototype.Female=function(a){var e=this;a.appearance={x:13,y:0,width:13,height:20,child:{x:26,y:10,width:11,height:10}},d.call(e,a),e.IQ=(a.IQ||0)+c.Helper.random(0,3),e.age=a.age||0,e.maxChildAge=15,e.married=!1,e.totalChildren=b,e.ageLastBear=0,e.chances=a.chances||{death:[{range:[1,5],from:.001,to:.005},{range:[5,20],from:.005,to:.01},{range:[20,30],from:.01,to:.025}],childbirth:[{range:[15,25],from:.1,to:.25},{range:[25,50],from:.25,to:.1},{range:[50,70],from:.1,to:.001}]}},e.prototype=Object.create(d.prototype),e.prototype.contructor=e,e.prototype.tick=function(){var a=this;a.tickCount++;var b=a.actionInterval;if(a.tickCount%b===b-1){var c=a.world,d=a.age,e=a.getChance(a,"death");if(e>0&&Math.random()<e&&c.remove(a),a.married&&d>=a.chances.childbirth[0].range[0]&&d>a.ageLastBear){var f=a.getChance(a,"childbirth");if(f>0&&Math.random()<f){a.ageLastBear=d,a.totalChildren++;var g={x:a.x,y:Math.min(c.height-1-c.padding,a.y+Math.floor(a.appearance.height/2)),IQ:Math.round((a.relationSeed.IQ+a.IQ)/2)};Math.random()<.5?c.add(c.Male,g):c.add(c.Female,g)}}}a.move(!1)}}(window),function(a){"use strict";var c=a.WorldJS;c.KnowledgeData={huga:{id:"huga",name:"Hunting and Gathering",description:["Living from edible plants and animals from the wild","<ul><li>Adult +1 food / year</li></ul>"].join(""),IQ:{priority:1,gained:0,required:2e3},following:["crop","cabr"],affectedYear:!1,onAffected:function(a){a.Rules.Food.adult+=1}},crop:{id:"crop",name:"Plant crops",description:["Start agriculture by planting a few crops","<ul><li>Adult +1 food / year</li></ul>"].join(""),IQ:{priority:1,gained:0,required:4e3},following:["agri"],affectedYear:!1,onAffected:function(a){a.Rules.Food.adult+=1}},cabr:{id:"cabr",name:"Cattle-breeding",description:["Domesticating animals to reduce the need of hunting wild animals for food","<ul><li>Adult +1 food / year</li><li>Death rate -10%</li></ul>"].join(""),IQ:{priority:1,gained:0,required:6e3},following:[],affectedYear:!1,onAffected:function(a){a.Rules.Food.adult+=1,a.Rules.ChanceIncr.death-=.1}},agri:{id:"agri",name:"Agriculture",description:["Developing techniques to produce a large amount of food","<ul><li>Adult +2 food / year</li><li>Food spoilage -20%</li></ul>"].join(""),IQ:{priority:1,gained:0,required:1e4},following:[],affectedYear:!1,onAffected:function(a){a.Rules.Food.adult+=2,a.Rules.FoodSpoilage.foodDecr-=.2}},fire:{id:"fire",name:"Control of fire",description:["Using fire for warmth and cooking","<ul><li>Death rate -10%</li></ul>"].join(""),IQ:{priority:1,gained:0,required:4e3},following:["writ"],affectedYear:!1,onAffected:function(a){a.Rules.ChanceIncr.death-=.1}},writ:{id:"writ",name:"Writing",description:["Inventing symbols that stood for things","<ul><li>Base IQ +1</li><li>Child -1 food per year</li></ul>"].join(""),IQ:{priority:1,gained:0,required:5e4},following:["coso"],affectedYear:!1,onAffected:function(a){a.Rules.baseIQ+=1,a.Rules.Food.child-=1}},coso:{id:"coso",name:"Coming soon...",description:['<br /><span class="label label-important">tl;dr</span> In the next update you will have the ability to expand the population beyond 7 billion and manage their knowledge to choose the fate of the world.<hr />',"Without any knowledge to be gained, the world will meet its apocalypse. Thus evolutions are needed in order for the world to progress and maintain its stability.<br /><br />","This is the idea behind <b>World JS: Evolution Simulator</b>. ","Hope you could understand its idea so far and contribute for its growth.<br /><br />","There are 10 types of people who can contribute to this open source project:<br />","<ul>",'<li>For those who understand binary: <a target="_blank" href="https://github.com/anvoz/world-js">Fork me on Github</a>.</li>','<li>For those who don\'t: Make your own knowledge list. See example in <a href="#" onclick="$(\'#knowledge a[rel=history]\').click(); return false;">knowledge history</a>.</li>',"</ul>",'For any feedback or ideas, email me at <a href="mailto: anvo4888@gmail.com">anvo4888@gmail.com</a>'].join(""),IQ:{priority:1,gained:0,required:2147483647},following:[],affectedYear:!1,onAffected:function(){}}}}(window),function(a){"use strict";var f,c=a.$,d=a.WorldJS,e="#world-freeze-btn";d.God={setWorldInstance:function(a){f=a},freeze:function(){var a=c(e);return f.running?(f.stop(),a.html("Unfreeze")):(f.start(),a.html("Freeze")),!1},setKnowledgePriority:function(a,b,d){f.Knowledge.list[b].IQ.priority=d;var e;return e=d>1?"progress":1>d?"progress progress-danger":"progress progress-info",c(a).addClass("active").siblings().removeClass("active").parent().parent().find(".progress").attr("class",e),!1},addRandomPeople:function(a){var b=0==f.Statistic.population;return f.addRandomPeople(a),(b||!f.running)&&(f.start(),c(e).html("Freeze")),!1},kill:function(a){return f.running||f.start(),f.stop(function(){var b=f.Tile.list,g=Math.random,h=a/100;d.Helper.is;for(var j=0,k=b.length;k>j;j++)for(var l=b[j],m=0,n=l.length;n>m;m++){var o=l[m];o&&g()<h&&f.remove(o)}f.start(),c(e).html("Freeze")}),!1},giveFood:function(a){return f.Statistic.food+=a,!1}}}(window),function(a){"use strict";var c=a.$,d=a.WorldJS,e=d.Interface={},f={Statistic:{year:0,population:0,food:0,men:0,women:0,families:0,boys:0,girls:0,IQ:0,maxIQ:0,yearMaxIQ:0,maxAge:0,yearMaxAge:0,avgIQ:0,avgAge:0,avgChildren:0},Rules:{adultFoodChange:0,childFoodChange:0,foodSpoilage:0},Knowledge:{knowledgeTrending:0,knowledgeHistory:0},Misc:{labelFamine:!1}};for(var g in f)if(f.hasOwnProperty(g)){var h=f[g];for(var i in h)if(h.hasOwnProperty(i)){var j=h[i];h[i]={container:c("#world-"+i),value:j}}}f.set=function(a,b){b!=a.value&&(a.value=b,a.container.html(b))},e.trendingAdded=function(a){var b="world-knowledge-"+a.id,d=['<div id="world-knowledge-',a.id,'" class="knowledge clearfix">','<div class="pull-right btn-group knowledgePriority">','<a class="btn btn-mini" href="#" title="forbid" onclick="return WorldJS.God.setKnowledgePriority(this, \'',a.id,"', 0.1);\">&or;</a>",'<a class="btn btn-mini active" href="#" title="free" onclick="return WorldJS.God.setKnowledgePriority(this, \'',a.id,"', 1);\">&bull;</a>",'<a class="btn btn-mini" href="#" title="encourage" onclick="return WorldJS.God.setKnowledgePriority(this, \'',a.id,"', 2);\">&and;</a>","</div>",'<div class="name">+ ',a.name,"</div>",'<div class="description">',a.description,"</div>",'<div class="progress progress-info"><div class="bar"></div></div>','<div class="IQ"><span class="world-IQ">0</span> / ',a.IQ.required," IQ</div>","</div>"].join(""),e=f.Knowledge;e.knowledgeTrending.container.append(d);var g=c("#"+b);e[a.id]={container:g,IQContainer:g.find(".world-IQ"),barContainer:g.find(".bar")}},e.trendingRemoved=function(a){var b=f.Knowledge[a.id];b.IQContainer.html(a.IQ.required),b.barContainer.width("100%"),b.container.remove(),delete f.Knowledge[a.id];var c=['<div class="knowledge">','<div class="name">',f.Statistic.year.value,": ",a.name,"</div>",'<div class="description">',a.description,"</div>","</div>"].join("");f.Knowledge.knowledgeHistory.container.prepend(c)},e.yearPassed=function(){var a=this,b=a.Statistic.year;100>b&&0==b%25&&a.addRandomPeople(25,10,20,25==b?1:50==b?2:5);var c=a.Statistic,d=f.Statistic;for(var e in d)if(d.hasOwnProperty(e))switch(e){case"avgIQ":var g=0==c.population?0:Math.round(c.IQ/c.population);f.set(d.avgIQ,g);break;case"avgAge":var h=0==c.die?0:Math.round(c.sumAge/c.die);f.set(d.avgAge,h);break;case"avgChildren":var i=0==c.dieMarriedFemale?0:Math.round(c.sumChildren/c.dieMarriedFemale);f.set(d.avgChildren,i);break;default:f.set(d[e],c[e])}var j=a.Rules,k=f.Rules;f.set(k.adultFoodChange,j.Food.adult),f.set(k.childFoodChange,j.Food.child),f.set(k.foodSpoilage,100*j.FoodSpoilage.foodDecr);for(var l=a.Knowledge,m=0,n=l.trending.length;n>m;m++){var o=l.list[l.trending[m]],p=f.Knowledge[o.id];p.IQContainer.html(o.IQ.gained),p.barContainer.width(Math.round(100*(o.IQ.gained/o.IQ.required))+"%")}var q=f.Misc.labelFamine,r=c.food<=j.Famine.unit;r!=q.value&&(q.value=r,r?q.container.removeClass("hide"):q.container.addClass("hide"))},c("#knowledge .header a").each(function(){c(this).click(function(){var a=c(this).attr("rel");return c(this).addClass("label").siblings("a").removeClass("label"),"trending"===a?(f.Knowledge.knowledgeTrending.container.removeClass("hide"),f.Knowledge.knowledgeHistory.container.addClass("hide")):(f.Knowledge.knowledgeTrending.container.addClass("hide"),f.Knowledge.knowledgeHistory.container.removeClass("hide")),!1})})}(window),function(a){"use strict";var c=a.WorldJS,d=c.Interface,e=new c,f=e.Knowledge;c.God.setWorldInstance(e),f.list=c.KnowledgeData,f.trending=["huga","fire"],d.trendingAdded(f.list.huga),d.trendingAdded(f.list.fire),f.trendingAdded=d.trendingAdded,f.trendingRemoved=d.trendingRemoved,e.yearPassedCallback=d.yearPassed,e.init("world");var g=30;e.add(e.Male,{x:10,y:10,moveTo:{x:320,y:180},age:13,chances:{death:[{range:[1,g-1],from:0,to:0},{range:[g-1,g],from:1,to:1}],marriage:[{range:[1,g],from:1,to:1}]}}),e.add(e.Female,{x:630,y:350,moveTo:{x:320,y:180},age:13,chances:{death:[{range:[1,g-1],from:0,to:0},{range:[g-1,g],from:1,to:1}],childbirth:[{range:[1,g],from:1,to:1}]}}),e.start()}(window);